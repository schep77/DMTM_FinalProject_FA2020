---
title: "R Notebook"
output: html_notebook
---

```{r}
library(tidyverse)
library(dplyr)
library(dbscan)
```


Our Dataset: 

```{r}
USBirths <- read.csv("https://raw.githubusercontent.com/reisanar/datasets/master/us_births_00_14.csv")
```


##Introduction

  The goal of our project is to explore the birthrates within the US and identify anomalous characteristics of birthrates, and to find the most popular times at which a child is born. In this project, we use the us_birth_00_14 dataset, which is a collections of the number of births from 2000 January 1st to 2014 December 31st. This collection has every single day between those dates, which will be used to analyze which days of birth are the most common every year, and any drastic changes in birthrates.

##Data Exploration

```{r}
USBirths
```

```{r}
USBirths %>% 
  group_by(year) %>% 
  #filter(year == 2000) %>% 
  mutate(totalBirths = births/sum(births) * 1000) %>%  #We are multiplying by 1000 because that is what google told me to do.
  ungroup()
```





## Data Analysis


### Univariate Outlier Detection



```{r}
totalBirthsPerMonth <- USBirths %>% 
  group_by(month) %>% 
  summarise(bpm_00_14 = sum(births))

totalBirthsPerMonth
```

```{r}
boxplot(USBirths$births  ~ USBirths$year, 
        main="Births by Year", ylab = "Number", xlab = "Year")
```



```{r}
ggplot(totalBirthsPerMonth, aes(month, bpm_00_14)) +
  geom_point() +
  geom_text(aes(label=names))
```

```{r}
bpm.lm <- lm(bpm_00_14 ~ month, data = totalBirthsPerMonth)
bpm.res <- resid(bpm.lm)
plot(bpm_00_14 ~ month, data = totalBirthsPerMonth)
abline(bpm.lm, col = "blue") 
text(bpm_00_14 ~ month, data = totalBirthsPerMonth, cex = 0.9, font = 2, pos = 4)

#res.lm <- lm(residuals ~ month, data = totalBirthsPerMonth)
#plot(totalBirthsPerMonth$month, bpm.res,
#     ylab = "Residuals", xlab = "Month")
#abline(res.lm, col = "blue")
```



 


```{r}
beforeRecession <- USBirths %>% 
  select(year, month, date_of_month, date, day_of_week, births) %>% 
  filter(year %in% 2006)

#totalBirths2006 <- Births2006 %>% 
#  mutate(Births2006, total_births = (births/4335154) * 1000)

totalBirths2006
```

```{r}
totalBirthsPerMonth2006 <- USBirths %>% 
  filter(month == 6)%>% 
  summarise(bpm_00_14 = sum(births))

totalBirthsPerMonth2006
```






```{r}
duringRecession <- USBirths %>% 
  select(year, month, date_of_month, date, day_of_week, births) %>% 
  filter(year %in% 2008)

totalBirths2008 <- Births2008 %>% 
  mutate(Births2008, total_births = (births/4310737) * 1000)

totalBirths2008
```




```{r}
afterRecession <- USBirths %>% 
  select(year, month, date_of_month, date, day_of_week, births) %>% 
  filter(year %in% 2010)

afterRecession2010 <- afterRecession %>% 
  mutate(Births2010, total_births = (births/4055975) * 1000)

afterRecession2010
```





Plans for moving foward:

1) figure out what to do with the birthrates
2) do something with days of the week
3) do something with recession data.
      a) look at data from Jan - Mar of 2006, 2008, 2010 to compare before, during, and after.
4) which day of the month is the popular
      a) this may be the birthrate?

Note: many of the R blocks have some errors. Typically just some missing variables for the last 2













